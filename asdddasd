local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer

local speed = 59 -- CHANGED
local enabled = false
local moveConnection

-- UI
local gui = Instance.new("ScreenGui")
gui.Name = "TigyVelocityToggle"
gui.ResetOnSpawn = false
gui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Size = UDim2.new(0,130,0,50)
button.Position = UDim2.new(0.05,0,0.8,0)
button.BackgroundColor3 = Color3.fromRGB(70,120,255)
button.Text = "Enable Move"
button.Font = Enum.Font.GothamBold
button.TextColor3 = Color3.fromRGB(255,255,255)
button.TextScaled = true
button.AutoButtonColor = false
button.Parent = gui

local corner = Instance.new("UICorner", button)
corner.CornerRadius = UDim.new(0,10)

local stroke = Instance.new("UIStroke", button)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(100,150,255)

-- Speed box
local box = Instance.new("TextBox")
box.Size = UDim2.new(0,60,0,50)
box.Position = UDim2.new(0.05,140,0.8,0)
box.BackgroundColor3 = Color3.fromRGB(15,15,15)
box.TextColor3 = Color3.fromRGB(255,255,255)
box.PlaceholderText = "59" -- CHANGED
box.Text = ""
box.Font = Enum.Font.GothamBold
box.TextScaled = true
box.ClearTextOnFocus = false
box.Parent = gui

local corner2 = Instance.new("UICorner", box)
corner2.CornerRadius = UDim.new(0,10)

local stroke2 = Instance.new("UIStroke", box)
stroke2.Thickness = 2
stroke2.Color = Color3.fromRGB(70,70,70)

-- Movement
local function startMove()
	moveConnection = RunService.Heartbeat:Connect(function()
		local char = LocalPlayer.Character
		if not char then return end

		local hrp = char:FindFirstChild("HumanoidRootPart")
		local hum = char:FindFirstChildOfClass("Humanoid")
		if not hrp or not hum then return end

		local dir = hum.MoveDirection
		local vel = Vector3.new(dir.X,0,dir.Z) * speed

		hrp.Velocity = hrp.Velocity:Lerp(
			Vector3.new(vel.X, hrp.Velocity.Y, vel.Z),
			0.45
		)
	end)
end

local function stopMove()
	if moveConnection then
		moveConnection:Disconnect()
		moveConnection = nil
	end
end

local function toggle()
	enabled = not enabled

	if enabled then
		button.Text = "Disable Move"
		button.BackgroundColor3 = Color3.fromRGB(255,70,70)
		stroke.Color = Color3.fromRGB(255,100,100)
		startMove()
	else
		button.Text = "Enable Move"
		button.BackgroundColor3 = Color3.fromRGB(70,120,255)
		stroke.Color = Color3.fromRGB(100,150,255)
		stopMove()
	end
end

-- Button
button.MouseButton1Click:Connect(toggle)

-- Semicolon toggle
UserInputService.InputBegan:Connect(function(input, gpe)
	if gpe then return end
	if input.KeyCode == Enum.KeyCode.Semicolon then
		toggle()
	end
end)

-- Speed input
box.FocusLost:Connect(function()
	local num = tonumber(box.Text)
	if num then
		speed = num
	end
end)
